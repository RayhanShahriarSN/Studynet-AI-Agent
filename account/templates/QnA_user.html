{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyNet - Welcome Back</title>
    <link rel="stylesheet" href="{% static 'css/QnA_user.css' %}">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="nav-container">
            <a href="{% url 'login_page' %}"> 
                <img src="../../static/images/logo.png" alt="" class="image">
                <div class="logo-icon"></div>
            </a>
            <div class="auth-buttons">
                <a href="{% url 'login_page' %}" class="login-btn">LOGIN</a>
                <a href="{% url 'signup_page' %}" class="signup-btn">SIGN UP</a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="content-wrapper">
            <div class="signup-container">
                <div class="signup-card">
                    {% if not chat %}
                    <div class="welcome-screen">
                        <div class="welcome-content">
                            <h1 class="welcome-title">What can I help you with today?</h1>
                            <p class="welcome-subtitle">Ask me anything and I'll provide detailed, helpful responses</p>

                            <form action="{% url 'rag_qna_page_phi' %}" method="post" class="welcome-search-form">
                                {% csrf_token %}
                                <div class="search-container">
                                    <!-- Graduation cap icon -->
                                    <svg class="graduation-icon" viewBox="0 0 24 24">
                                        <path d="M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"/>
                                    </svg>
                                    
                                    {{ ask_form.question }}
                                    
                                    <button type="submit" class="search-icon-container">
                                        <svg class="search-icon" viewBox="0 0 24 24">
                                            <circle cx="11" cy="11" r="8"></circle>
                                            <path d="m21 21-4.35-4.35"></path>
                                        </svg>
                                    </button>
                                </div>
                            </form>
                            <div class="sidebar-footer">
                                <form action="{% url 'clear_chatphi' %}" method="post">
                                {% csrf_token %}
                                    <button type="submit" class="btn-clear">Clear Conversation</button>
                                </form>
                             </div>
                        </div>
                    </div>

                    {% endif %}

                    {% if chat %}
                    <div class="chat-interface">
                        <div class="chat-messages">
                            {% for message in chat %}
                                <div class="message-container {{ message.who }}">
                                    <div class="message-content">
                                        <div class="message-header">
                                            <div class="message-avatar">
                                                {% if message.who == 'user' %}
                                                    <span class="avatar-text">You</span>
                                                {% else %}
                                                    <span class="avatar-icon">ðŸ¤–</span>
                                                {% endif %}
                                            </div>
                                            <div class="message-meta">
                                                <span class="message-sender">{{ message.who|title }}</span>
                                                {% if message.llm %}
                                                    <span class="message-model">{{ message.llm }}</span>
                                                {% endif %}
                                            </div>
                                        </div>
                                        <div class="message-text">
                                            {% if message.who == 'bot' %}
                                                {{ message.text|linebreaks|safe }}
                                            {% else %}
                                                {{ message.text|linebreaks|safe }}
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>

                        <div class="bottom-search-bar">
                            <div class="bottom-search-container">
                                <form action="{% url 'rag_qna_page_phi' %}" method="post" class="bottom-search-form">
                                    {% csrf_token %}
                                    <div class="search-container bottom">
                                        <!-- Graduation cap icon -->
                                        <svg class="graduation-icon" viewBox="0 0 24 24">
                                            <path d="M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"/>
                                        </svg>
                                        
                                        {{ ask_form.question }}
                                        
                                        <button type="submit" class="search-icon-container">
                                            <svg class="search-icon" viewBox="0 0 24 24">
                                                <circle cx="11" cy="11" r="8"></circle>
                                                <path d="m21 21-4.35-4.35"></path>
                                            </svg>
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <div class="status-dot"></div>
                            <span>{{ status_msg }}</span>
                        </div>

                       


                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-links">
                <div class="footer-section">
                    <p>STUDYNET is an Australian Technology based Education and Migration counselling company, specializing in providing information and services for international students, professionals and migrants who are looking to further their careers in Australia.</p>
                </div>

                <div class="footer-column">
                    <h4>Solutions</h4>
                    <a href="#">Student</a>
                    <a href="#">Counsellors</a>
                    <a href="#">Agencies</a>
                    <a href="#">Providers</a>
                </div>
                
                <div class="footer-column">
                    <h4>About us</h4>
                    <a href="#">About Us</a>
                    <a href="#">Contact Us</a>
                    <a href="#">Virtual Office</a>
                    <a href="#">Studyto for Agent</a>
                    <a href="#">Visa Services</a>
                </div>
                
                <div class="footer-column">
                    <h4>Quick Links</h4>
                    <a href="#">Events</a>
                    <a href="#">Careers</a>
                    <a href="#">Payment</a>
                    <a href="#">Referral</a>
                    <a href="#">IELTS Registration</a>
                    <a href="#">Claims/Refund Request</a>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>