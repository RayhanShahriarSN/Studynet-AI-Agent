{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyNet - Chat</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <!-- Header / Navbar -->
    <header class="header">
        <div class="nav-container">
            <a href="{% url 'login_page' %}"> 
                <img src="{% static 'images/logo.png' %}" alt="Logo" class="image">
            </a>
            <div class="auth-info">
                {% if user.is_authenticated %}
                    <span class="logged-in-user">Logged in as: {{ user.username }}</span>
                    <span class="token-info">
                        Tokens: {{ user.tokens_used|default:0 }}/{{ max_tokens|default:1000 }}
                        {% if tokens_remaining <= 100 %}
                            <span class="token-warning">âš  Low tokens!</span>
                        {% endif %}
                    </span>
                {% endif %}
            </div>
            <div class="auth-buttons">
                <a href="{% url 'logout_page' %}" class="signup-btn">LOGOUT</a>
            </div>
        </div>
    </header>


        <!-- Main Content -->
        <main class="main-content">
            <!-- Chat Container -->
            <div class="chat-container">
                <div class="chat-messages" id="chatMessages">
                    <div class="welcome-message">
                        <div class="welcome-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <h1>What can I help you with today?</h1>
                        <p>Ask me anything and I'll provide detailed, helpful responses</p>
                        
                    </div>
                

                <!-- Input Area -->
                <div class="input-area">
                    <div class="input-container">
                        <div class="input-options">
                            <label class="checkbox-label">
                                <input type="checkbox" id="useWebSearch" checked>
                                <span class="checkmark"></span>
                                Web Search
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="enhanceFormatting" checked>
                                <span class="checkmark"></span>
                                Enhanced Formatting
                            </label>
                        </div>
                        <div class="input-wrapper">
                            <input type="text" id="queryInput" placeholder="Ask your question..." autocomplete="off">
                            <button id="sendButton" class="send-btn">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
                </div>
            </div>

            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="sidebar-section">
                    <h3><i class="fas fa-chart-line"></i> System Status</h3>
                    <div class="status-card">
                        <div class="status-item">
                            <span class="status-label">API Status</span>
                            <span class="status-value" id="apiStatus">Checking...</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">Knowledge Base</span>
                            <span class="status-value" id="kbStatus">Loading...</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">Active Sessions</span>
                            <span class="status-value" id="sessionCount">-</span>
                        </div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <h3><i class="fas fa-cog"></i> Settings</h3>
                    <div class="settings-card">
                        <div class="setting-item">
                            <label>Session ID</label>
                            <input type="text" id="sessionId" placeholder="Auto-generated" readonly>
                        </div>
                        <div class="setting-item">
                            <label>Response Time</label>
                            <span id="responseTime">-</span>
                        </div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <h3><i class="fas fa-history"></i> Recent Queries</h3>
                    <div class="recent-queries" id="recentQueries">
                        <p class="no-queries">No recent queries</p>
                    </div>
                </div>
            </aside>
        </main>
    </div>

    

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Processing your request...</p>
        </div>
    </div>

    <!-- Developer Mode Toggle -->
    <button id="developerToggle" class="developer-toggle" title="Developer Mode">
        <i class="fas fa-code"></i>
    </button>

    <!-- Developer Mode Panel -->
    <div id="developerMode" class="developer-mode">
        <div class="developer-header">
            <h2><i class="fas fa-code"></i> Developer Mode</h2>
            <p>Advanced tools and debugging features</p>
            <button class="dev-close" id="closeDeveloperMode">&times;</button>
        </div>
        
        <div class="developer-content">
            <!-- Memory Management Section -->
            <div class="dev-section">
                <h3><i class="fas fa-memory"></i> Memory Management</h3>
                <input type="text" id="devSessionId" class="dev-input" placeholder="Session ID (optional)">
                <button class="dev-button" id="getMemory">
                    <i class="fas fa-download"></i> Get Memory for Session
                </button>
                <button class="dev-button danger" id="clearMemory">
                    <i class="fas fa-trash"></i> Clear Session Memory
                </button>
                <button class="dev-button" id="listSessions">
                    <i class="fas fa-list"></i> List All Sessions
                </button>
                <div id="memoryOutput" class="dev-output" style="display: none;"></div>
            </div>

            <!-- Knowledge Base Section -->
            <div class="dev-section">
                <h3><i class="fas fa-database"></i> Knowledge Base</h3>
                <button class="dev-button" id="getKbStatus">
                    <i class="fas fa-info-circle"></i> Knowledge Base Status
                </button>
                <button class="dev-button success" id="reloadKb">
                    <i class="fas fa-sync"></i> Reload Knowledge Base
                </button>
                <button class="dev-button danger" id="clearVectorStore">
                    <i class="fas fa-broom"></i> Clear Vector Store
                </button>
                <div id="kbOutput" class="dev-output" style="display: none;"></div>
            </div>

            <!-- System Metrics Section -->
            <div class="dev-section">
                <h3><i class="fas fa-chart-bar"></i> System Metrics</h3>
                <button class="dev-button" id="getMetrics">
                    <i class="fas fa-chart-line"></i> Get System Metrics
                </button>
                <button class="dev-button" id="resetMetrics">
                    <i class="fas fa-redo"></i> Reset Metrics
                </button>
                <div id="metricsOutput" class="dev-output" style="display: none;"></div>
            </div>

            <!-- API Testing Section -->
            <div class="dev-section">
                <h3><i class="fas fa-flask"></i> API Testing</h3>
                <input type="text" id="testEndpoint" class="dev-input" placeholder="API Endpoint (e.g., /api/health/)">
                <button class="dev-button" id="testApi">
                    <i class="fas fa-play"></i> Test API Endpoint
                </button>
                <div id="apiTestOutput" class="dev-output" style="display: none;"></div>
            </div>

            <!-- Debug Info Section -->
            <div class="dev-section">
                <h3><i class="fas fa-bug"></i> Debug Info</h3>
                <div class="dev-status" id="connectionStatus">
                    <i class="fas fa-circle"></i>
                    <span>Connection: Checking...</span>
                </div>
                <div class="dev-status" id="lastRequest">
                    <i class="fas fa-clock"></i>
                    <span>Last Request: None</span>
                </div>
                <div class="dev-status" id="errorCount">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Errors: 0</span>
                </div>
            </div>
        </div>
    </div>



<!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-links">
                <div class="footer-section">
                    <p>STUDYNET is an Australian Technology based Education and Migration counselling company, specializing in providing information and services for international students, professionals and migrants who are looking to further their careers in Australia.</p>
                </div>

                <div class="footer-column">
                    <h4>Solutions</h4>
                    <a href="#">Student</a>
                    <a href="#">Counsellors</a>
                    <a href="#">Agencies</a>
                    <a href="#">Providers</a>
                </div>

                <div class="footer-column">
                    <h4>About us</h4>
                    <a href="#">About Us</a>
                    <a href="#">Contact Us</a>
                    <a href="#">Virtual Office</a>
                    <a href="#">Studyto for Agent</a>
                    <a href="#">Visa Services</a>
                </div>

                <div class="footer-column">
                    <h4>Quick Links</h4>
                    <a href="#">Events</a>
                    <a href="#">Careers</a>
                    <a href="#">Payment</a>
                    <a href="#">Referral</a>
                    <a href="#">IELTS Registration</a>
                    <a href="#">Claims/Refund Request</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="{% static 'js/app.js' %}"></script>
</body>
    
</body>

</html>
